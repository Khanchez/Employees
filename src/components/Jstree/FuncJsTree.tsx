import React, {useEffect} from "react"; import Employee from "../../Storage/Model/Employee"; import $ from "jquery"; import {useDispatch} from "react-redux"; import 'jstree' import * as types from "../../Storage/redux/actionTypes" import "./JsTree.css"  function FuncJsTree(props:any) {      let dispatch = useDispatch();      function findDepartmentName(allEmployeers: Array<Employee>) {          let departmentsNames: Array<string> = []          for (let i = 0; i < allEmployeers.length; i++) {             let name = allEmployeers[i].department             let exist = departmentsNames.find((e) => {                 return e === name             })             if (!exist) {                 departmentsNames.push(name)             }         }         return departmentsNames     }     function findPeopleInDepartment(departmentsNames: Array<string>, allEmployeers: Array<Employee>) {                  let globalArray: Array<Array<Employee>> = []          for (let i = 0; i < departmentsNames.length; i++) {             let departmentPeoples = allEmployeers.filter((emp: Employee) => emp.department === departmentsNames[i])             globalArray.push(departmentPeoples)         }         return globalArray     }      function createJstreeObject(globalArray: Array<Array<Employee>>) {         let result = []          for (let i = 0; i < globalArray.length; i++) {             let department = globalArray[i];             let obj = {                 text: department[0].department,                 children: department.map((emp) => {                     return {                         id: emp.id,                         text: emp.firstName + ' ' + emp.lastName + ' ' + emp.middleName,                         data: emp                     }                 })             }             result.push(obj)         }         return result     }       let groupEmployee = function () {          let allEmployeers = props.employeeData         let departmentsNames = findDepartmentName(allEmployeers)         let globalArray = findPeopleInDepartment(departmentsNames, allEmployeers)         let result = createJstreeObject(globalArray)         return result                      }     let data:any       useEffect(() => {         data = groupEmployee()         $('#jsTree')             .on('changed.jstree', function (e, data) {                  let emp = data.node.data;                 dispatch({                     type: types.SET_CURRENT_EMP,                     payload: {                         currentEmployeer: emp                     }                 })              })             .jstree({                 'core': {                     'data': data,                 }             })     })      return (             <div className="jsTree" id="jsTree"></div>     ) }  export default FuncJsTree;